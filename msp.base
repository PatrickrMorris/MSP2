<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MSP â€“ Mandarin Speaking Practice</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      background: #0f172a;
      color: #e5e7eb;
      display: flex;
      min-height: 100vh;
      align-items: stretch;
      justify-content: center;
    }
    .app {
      max-width: 480px;
      width: 100%;
      margin: 0 auto;
      padding: 16px 16px 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .card {
      background: radial-gradient(circle at top, #1e293b, #020617);
      border-radius: 18px;
      padding: 18px 16px;
      box-shadow: 0 14px 40px rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.18);
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .title-block h1 {
      font-size: 1.2rem;
      margin: 0;
      letter-spacing: 0.02em;
    }
    .title-block p {
      margin: 2px 0 0;
      font-size: 0.78rem;
      color: #9ca3af;
    }
    .pill {
      font-size: 0.72rem;
      padding: 4px 8px;
      background: rgba(56, 189, 248, 0.1);
      color: #38bdf8;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.4);
      white-space: nowrap;
    }
    .mode-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .mode-btn {
      flex: 1 1 45%;
      min-width: 45%;
      font-size: 0.8rem;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    .mode-btn span.icon { font-size: 0.95rem; }
    .mode-btn.active {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.2), rgba(15, 23, 42, 0.98));
    }
    .phrase-card {
      margin-top: 8px;
      padding: 14px 12px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(15, 118, 110, 0.2), rgba(30, 64, 175, 0.5));
      border: 1px solid rgba(56, 189, 248, 0.4);
    }
    .phrase-top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 8px;
    }
    .tag {
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #cbd5f5;
    }
    .small-label {
      font-size: 0.75rem;
      color: #d1d5db;
      opacity: 0.9;
    }
    .hanzi {
      font-size: 1.6rem;
      margin: 4px 0 2px;
    }
    .pinyin {
      font-size: 0.95rem;
      color: #d1fae5;
      margin: 0 0 4px;
    }
    .english {
      font-size: 0.9rem;
      color: #e5e7eb;
      opacity: 0.96;
      margin: 0;
    }
    .controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .primary-btn,
    .ghost-btn {
      font-size: 0.8rem;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.6);
      background: rgba(8, 47, 73, 0.9);
      color: #e0f2fe;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .ghost-btn {
      background: transparent;
      border-color: rgba(148, 163, 184, 0.7);
      color: #d1d5db;
    }
    .primary-btn:active,
    .ghost-btn:active,
    .mode-btn:active {
      transform: translateY(1px);
      opacity: 0.85;
    }
    .footer {
      margin-top: auto;
      font-size: 0.7rem;
      text-align: center;
      color: #6b7280;
    }
    .hidden { display: none; }
    @media (min-width: 600px) {
      .app { padding-top: 32px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <section class="card">
      <div class="header">
        <div class="title-block">
          <h1>MSP Â· Mandarin</h1>
          <p>Tap a mode, then â€œNew phraseâ€ to practice.</p>
        </div>
        <div class="pill">Offline mini-app</div>
      </div>

      <div class="mode-row">
        <button class="mode-btn active" data-mode="all">
          <span class="icon">ğŸ²</span>
          <span>Random</span>
        </button>
        <button class="mode-btn" data-mode="everyday">
          <span class="icon">ğŸŒ¤ï¸</span>
          <span>Everyday</span>
        </button>
        <button class="mode-btn" data-mode="retail">
          <span class="icon">ğŸ›’</span>
          <span>Retail</span>
        </button>
        <button class="mode-btn" data-mode="pharmacy">
          <span class="icon">ğŸ’Š</span>
          <span>Pharmacy</span>
        </button>
      </div>

      <div class="phrase-card" id="phraseCard">
        <div class="phrase-top-row">
          <span class="tag" id="categoryTag">All Â· Warm-up</span>
          <span class="small-label" id="indexLabel">â€”</span>
        </div>
        <div>
          <div class="hanzi" id="hanzi">ç‚¹å‡»â€œæ–°çŸ­è¯­â€</div>
          <div class="pinyin" id="pinyin">DiÇnâ€‹jÄ« â€œxÄ«n duÇnyÇ”â€</div>
          <p class="english" id="english">Tap â€œNew phraseâ€ to start.</p>
        </div>
        <div class="controls-row">
          <button class="primary-btn" id="newPhraseBtn">
            <span>ğŸ” New phrase</span>
          </button>
          <button class="ghost-btn" id="toggleRevealBtn">
            <span>ğŸ‘ Hide meaning</span>
          </button>
        </div>
      </div>
    </section>

    <div class="footer">
      MSP v0.1 Â· Phrases are stored locally in this file. Add this page to your Home Screen to use it like an app.
    </div>
  </div>

  <script>
    const phrases = [
      // Everyday
      { category: "everyday", label: "Everyday", hanzi: "ä½ å¥½", pinyin: "NÇ hÇo", english: "Hello." },
      { category: "everyday", label: "Everyday", hanzi: "è°¢è°¢", pinyin: "XiÃ¨xie", english: "Thank you." },
      { category: "everyday", label: "Everyday", hanzi: "ä¸å¥½æ„æ€", pinyin: "BÃ¹ hÇo yÃ¬si", english: "Excuse me / Sorry (polite)." },
      { category: "everyday", label: "Everyday", hanzi: "æˆ‘å¬ä¸æ‡‚", pinyin: "WÇ’ tÄ«ng bÃ¹ dÇ’ng", english: "I donâ€™t understand (what I hear)." },
      { category: "everyday", label: "Everyday", hanzi: "å¯ä»¥è¯´æ…¢ä¸€ç‚¹å—ï¼Ÿ", pinyin: "KÄ›yÇ shuÅ mÃ n yÃ¬diÇn ma?", english: "Could you speak a bit more slowly?" },

      // Retail
      { category: "retail", label: "Retail", hanzi: "éœ€è¦å¸®å¿™å—ï¼Ÿ", pinyin: "XÅ«yÃ o bÄngmÃ¡ng ma?", english: "Do you need any help?" },
      { category: "retail", label: "Retail", hanzi: "æˆ‘å¯ä»¥å¸®ä½ æ‰¾ã€‚", pinyin: "WÇ’ kÄ›yÇ bÄng nÇ zhÇo.", english: "I can help you find it." },
      { category: "retail", label: "Retail", hanzi: "è¿™ä¸ªåœ¨é‚£è¾¹çš„è´§æ¶ä¸Šã€‚", pinyin: "ZhÃ¨ge zÃ i nÃ biÄn de huÃ²jiÃ  shÃ ng.", english: "That is on the shelf over there." },
      { category: "retail", label: "Retail", hanzi: "ä»Šå¤©è¿™äº›åœ¨æ‰“æŠ˜ã€‚", pinyin: "JÄ«ntiÄn zhÃ¨xiÄ“ zÃ i dÇzhÃ©.", english: "These are on sale today." },
      { category: "retail", label: "Retail", hanzi: "ä½ æœ‰ä¼šå‘˜å¡å—ï¼Ÿ", pinyin: "NÇ yÇ’u huÃ¬yuÃ¡n kÇ ma?", english: "Do you have a rewards card?" },

      // Pharmacy
      { category: "pharmacy", label: "Pharmacy", hanzi: "ä½ åœ¨æ‹¿å¤„æ–¹è¯è¿˜æ˜¯ä¹°åˆ«çš„ï¼Ÿ", pinyin: "NÇ zÃ i nÃ¡ chÇ”fÄng yÃ o hÃ¡ishÃ¬ mÇi biÃ© de?", english: "Are you picking up a prescription or buying something else?" },
      { category: "pharmacy", label: "Pharmacy", hanzi: "ä½ çš„ç”Ÿæ—¥æ˜¯å‡ æœˆå‡ å·ï¼Ÿ", pinyin: "NÇ de shÄ“ngrÃ¬ shÃ¬ jÇ yuÃ¨ jÇ hÃ o?", english: "What is your date of birth?" },
      { category: "pharmacy", label: "Pharmacy", hanzi: "ä½ å¯¹ä»€ä¹ˆè¯è¿‡æ•å—ï¼Ÿ", pinyin: "NÇ duÃ¬ shÃ©nme yÃ o guÃ²mÇn ma?", english: "Are you allergic to any medicine?" },
      { category: "pharmacy", label: "Pharmacy", hanzi: "ä¸€å¤©åƒä¸¤æ¬¡ï¼Œæ¯æ¬¡ä¸€ç‰‡ã€‚", pinyin: "YÃ¬tiÄn chÄ« liÇng cÃ¬, mÄ›i cÃ¬ yÃ­ piÃ n.", english: "Take it twice a day, one tablet each time." },
      { category: "pharmacy", label: "Pharmacy", hanzi: "éœ€è¦æˆ‘å¸®ä½ å«ç¿»è¯‘å—ï¼Ÿ", pinyin: "XÅ«yÃ o wÇ’ bÄng nÇ jiÃ o fÄnyÃ¬ ma?", english: "Do you need me to call an interpreter for you?" }
    ];

    let currentMode = "all";
    let currentIndex = null;
    let currentPool = phrases.slice();
    let reveal = true;

    const modeButtons = document.querySelectorAll(".mode-btn");
    const hanziEl = document.getElementById("hanzi");
    const pinyinEl = document.getElementById("pinyin");
    const englishEl = document.getElementById("english");
    const categoryTagEl = document.getElementById("categoryTag");
    const indexLabelEl = document.getElementById("indexLabel");
    const newPhraseBtn = document.getElementById("newPhraseBtn");
    const toggleRevealBtn = document.getElementById("toggleRevealBtn");

    function updateMode(mode) {
      currentMode = mode;
      modeButtons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.mode === mode);
      });

      if (mode === "all") {
        currentPool = phrases.slice();
        categoryTagEl.textContent = "All Â· Mixed practice";
      } else {
        currentPool = phrases.filter(p => p.category === mode);
        const label = currentPool[0]?.label || "Practice";
        categoryTagEl.textContent = label + " Â· " + (mode === "everyday" ? "Daily use" : mode === "retail" ? "Store / Front" : "Pharmacy");
      }

      currentIndex = null;
      indexLabelEl.textContent = "â€”";
      hanziEl.textContent = "ç‚¹å‡»â€œæ–°çŸ­è¯­â€";
      pinyinEl.textContent = "DiÇnâ€‹jÄ« â€œxÄ«n duÇnyÇ”â€";
      englishEl.textContent = "Tap â€œNew phraseâ€ to start.";
      if (!reveal) {
        pinyinEl.classList.add("hidden");
        englishEl.classList.add("hidden");
      }
    }

    function getRandomIndex() {
      if (currentPool.length === 0) return null;
      if (currentPool.length === 1) return 0;
      let idx;
      do {
        idx = Math.floor(Math.random() * currentPool.length);
      } while (idx === currentIndex);
      return idx;
    }

    function showNewPhrase() {
      if (!currentPool.length) {
        hanziEl.textContent = "è¿™é‡Œè¿˜æ²¡æœ‰çŸ­è¯­";
        pinyinEl.textContent = "ZhÃ¨lÇ hÃ¡i mÃ©iyÇ’u duÇnyÇ”";
        englishEl.textContent = "No phrases in this category yet.";
        indexLabelEl.textContent = "0 / 0";
        return;
      }
      const idx = getRandomIndex();
      currentIndex = idx;
      const phrase = currentPool[idx];
      hanziEl.textContent = phrase.hanzi;
      pinyinEl.textContent = phrase.pinyin;
      englishEl.textContent = phrase.english;

      const displayLabel = phrase.label || "Practice";
      indexLabelEl.textContent = (idx + 1) + " / " + currentPool.length;
      if (currentMode === "all") {
        categoryTagEl.textContent = displayLabel + " Â· Random";
      } else {
        categoryTagEl.textContent =
          displayLabel + " Â· " +
          (currentMode === "everyday" ? "Daily use" :
           currentMode === "retail" ? "Store / Front" : "Pharmacy");
      }

      if (!reveal) {
        pinyinEl.classList.add("hidden");
        englishEl.classList.add("hidden");
      }
    }

    function toggleReveal() {
      reveal = !reveal;
      if (reveal) {
        pinyinEl.classList.remove("hidden");
        englishEl.classList.remove("hidden");
        toggleRevealBtn.innerHTML = "<span>ğŸ‘ Hide meaning</span>";
      } else {
        pinyinEl.classList.add("hidden");
        englishEl.classList.add("hidden");
        toggleRevealBtn.innerHTML = "<span>ğŸ‘ Show meaning</span>";
      }
    }

    modeButtons.forEach(btn => {
      btn.addEventListener("click", () => updateMode(btn.dataset.mode));
    });

    newPhraseBtn.addEventListener("click", showNewPhrase);
    toggleRevealBtn.addEventListener("click", toggleReveal);
  </script>
</body>
</html>
