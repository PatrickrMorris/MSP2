<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MSP â€“ HSK1â€“2 Mandarin Practice</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      background: #020617;
      color: #e5e7eb;
      display: flex;
      min-height: 100vh;
      align-items: stretch;
      justify-content: center;
    }
    .app {
      max-width: 480px;
      width: 100%;
      margin: 0 auto;
      padding: 16px 16px 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .card {
      background: radial-gradient(circle at top, #1e293b, #020617);
      border-radius: 18px;
      padding: 18px 16px;
      box-shadow: 0 14px 40px rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.18);
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .title-block h1 {
      font-size: 1.2rem;
      margin: 0;
      letter-spacing: 0.02em;
    }
    .title-block p {
      margin: 2px 0 0;
      font-size: 0.78rem;
      color: #9ca3af;
    }
    .pill {
      font-size: 0.72rem;
      padding: 4px 8px;
      background: rgba(56, 189, 248, 0.1);
      color: #38bdf8;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.4);
      white-space: nowrap;
    }
    .mode-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }
    .mode-btn {
      flex: 1 1 30%;
      min-width: 30%;
      font-size: 0.8rem;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.94);
      color: #e5e7eb;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    .mode-btn span.icon { font-size: 0.95rem; }
    .mode-btn.active {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
      background: radial-gradient(circle at top left,
        rgba(56, 189, 248, 0.2),
        rgba(15, 23, 42, 0.98));
    }
    .phrase-card {
      margin-top: 8px;
      padding: 14px 12px;
      border-radius: 14px;
      background: linear-gradient(
        135deg,
        rgba(15, 118, 110, 0.25),
        rgba(30, 64, 175, 0.7)
      );
      border: 1px solid rgba(56, 189, 248, 0.45);
    }
    .phrase-top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      margin-bottom: 8px;
    }
    .tag {
      font-size: 0.7rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #cbd5f5;
    }
    .small-label {
      font-size: 0.75rem;
      color: #d1d5db;
      opacity: 0.9;
      text-align: right;
    }
    .hanzi {
      font-size: 1.6rem;
      margin: 4px 0 2px;
      line-height: 1.3;
    }
    .pinyin {
      font-size: 0.95rem;
      color: #d1fae5;
      margin: 0 0 4px;
    }
    .english {
      font-size: 0.9rem;
      color: #e5e7eb;
      opacity: 0.97;
      margin: 0;
    }
    .controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }
    .primary-btn,
    .ghost-btn {
      font-size: 0.8rem;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.6);
      background: rgba(8, 47, 73, 0.9);
      color: #e0f2fe;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    .ghost-btn {
      background: transparent;
      border-color: rgba(148, 163, 184, 0.7);
      color: #d1d5db;
    }
    .primary-btn:active,
    .ghost-btn:active,
    .mode-btn:active {
      transform: translateY(1px);
      opacity: 0.85;
    }
    .footer {
      margin-top: auto;
      font-size: 0.7rem;
      text-align: center;
      color: #6b7280;
    }
    .hidden { display: none; }
    @media (min-width: 600px) {
      .app { padding-top: 32px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <section class="card">
      <div class="header">
        <div class="title-block">
          <h1>MSP Â· HSK1â€“2</h1>
          <p>Smart random Â· No repeats until you see them all.</p>
        </div>
        <div class="pill">Drill mode</div>
      </div>

      <div class="mode-row">
        <button class="mode-btn active" data-mode="all">
          <span class="icon">ğŸ²</span><span>All (HSK1â€“2)</span>
        </button>
        <button class="mode-btn" data-mode="hsk1">
          <span class="icon">â‘ </span><span>HSK 1</span>
        </button>
        <button class="mode-btn" data-mode="hsk2">
          <span class="icon">â‘¡</span><span>HSK 2</span>
        </button>
      </div>

      <div class="phrase-card" id="phraseCard">
        <div class="phrase-top-row">
          <span class="tag" id="categoryTag">HSK Â· Warm-up</span>
          <span class="small-label" id="indexLabel">Seen 0 / 0</span>
        </div>
        <div>
          <div class="hanzi" id="hanzi">ç‚¹å‡»â€œæ–°çŸ­è¯­â€</div>
          <div class="pinyin" id="pinyin">DiÇnâ€‹jÄ« â€œxÄ«n duÇnyÇ”â€</div>
          <p class="english" id="english">Tap â€œNew phraseâ€ to start.</p>
        </div>
        <div class="controls-row">
          <button class="primary-btn" id="newPhraseBtn">
            <span>ğŸ” New phrase</span>
          </button>
          <button class="ghost-btn" id="toggleRevealBtn">
            <span>ğŸ‘ Hide meaning</span>
          </button>
        </div>
      </div>
    </section>

    <div class="footer">
      MSP HSK v1.0 Â· Random with full-cycle coverage Â· Add to Home Screen to use like an app.
    </div>
  </div>

  <script>
    // HSK1 + HSK2 core sentence bank (~80 phrases, expandable)
    const phrases = [
      // ---------- HSK 1 ----------
      { category: "hsk1", label: "HSK 1 Â· Greeting", hanzi: "ä½ å¥½ã€‚", pinyin: "NÇ hÇo.", english: "Hello." },
      { category: "hsk1", label: "HSK 1 Â· Greeting", hanzi: "ä½ å¥½å—ï¼Ÿ", pinyin: "NÇ hÇo ma?", english: "How are you?" },
      { category: "hsk1", label: "HSK 1 Â· Greeting", hanzi: "æˆ‘å¾ˆå¥½ï¼Œä½ å‘¢ï¼Ÿ", pinyin: "WÇ’ hÄ›n hÇo, nÇ ne?", english: "Iâ€™m very good, and you?" },
      { category: "hsk1", label: "HSK 1 Â· Basic", hanzi: "å†è§ã€‚", pinyin: "ZÃ ijiÃ n.", english: "Goodbye." },
      { category: "hsk1", label: "HSK 1 Â· Polite", hanzi: "è°¢è°¢ã€‚", pinyin: "XiÃ¨xie.", english: "Thank you." },
      { category: "hsk1", label: "HSK 1 Â· Polite", hanzi: "ä¸å®¢æ°”ã€‚", pinyin: "BÃº kÃ¨qi.", english: "Youâ€™re welcome." },
      { category: "hsk1", label: "HSK 1 Â· Polite", hanzi: "å¯¹ä¸èµ·ã€‚", pinyin: "DuÃ¬buqÇ.", english: "Sorry." },
      { category: "hsk1", label: "HSK 1 Â· Polite", hanzi: "æ²¡å…³ç³»ã€‚", pinyin: "MÃ©i guÄnxi.", english: "Itâ€™s okay / No problem." },
      { category: "hsk1", label: "HSK 1 Â· Polite", hanzi: "è¯·é—®ï¼Œå•æ‰€åœ¨å“ªå„¿ï¼Ÿ", pinyin: "QÇngwÃ¨n, cÃ¨suÇ’ zÃ i nÇr?", english: "Excuse me, where is the bathroom?" },

      { category: "hsk1", label: "HSK 1 Â· Name", hanzi: "ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ", pinyin: "NÇ jiÃ o shÃ©nme mÃ­ngzi?", english: "What is your name?" },
      { category: "hsk1", label: "HSK 1 Â· Name", hanzi: "æˆ‘å« â€¦â€¦ã€‚", pinyin: "WÇ’ jiÃ o â€¦â€¦.", english: "My name is â€¦" },
      { category: "hsk1", label: "HSK 1 Â· Country", hanzi: "ä½ æ˜¯å“ªå›½äººï¼Ÿ", pinyin: "NÇ shÃ¬ nÇ guÃ³ rÃ©n?", english: "Which country are you from?" },
      { category: "hsk1", label: "HSK 1 Â· Country", hanzi: "æˆ‘æ˜¯ç¾å›½äººã€‚", pinyin: "WÇ’ shÃ¬ MÄ›iguÃ³ rÃ©n.", english: "Iâ€™m American." },
      { category: "hsk1", label: "HSK 1 Â· Living", hanzi: "ä½ ä½åœ¨å“ªå„¿ï¼Ÿ", pinyin: "NÇ zhÃ¹ zÃ i nÇr?", english: "Where do you live?" },
      { category: "hsk1", label: "HSK 1 Â· Living", hanzi: "æˆ‘ä½åœ¨ â€¦â€¦ã€‚", pinyin: "WÇ’ zhÃ¹ zÃ i â€¦â€¦.", english: "I live in â€¦" },

      { category: "hsk1", label: "HSK 1 Â· Language", hanzi: "ä½ ä¼šè¯´æ±‰è¯­å—ï¼Ÿ", pinyin: "NÇ huÃ¬ shuÅ HÃ nyÇ” ma?", english: "Can you speak Chinese?" },
      { category: "hsk1", label: "HSK 1 Â· Language", hanzi: "æˆ‘ä¼šè¯´ä¸€ç‚¹å„¿ã€‚", pinyin: "WÇ’ huÃ¬ shuÅ yÃ¬diÇnr.", english: "I can speak a little." },
      { category: "hsk1", label: "HSK 1 Â· Listening", hanzi: "æˆ‘å¬ä¸æ‡‚ã€‚", pinyin: "WÇ’ tÄ«ng bÃ¹ dÇ’ng.", english: "I donâ€™t understand (what I hear)." },
      { category: "hsk1", label: "HSK 1 Â· Listening", hanzi: "å¯ä»¥è¯´æ…¢ä¸€ç‚¹å—ï¼Ÿ", pinyin: "KÄ›yÇ shuÅ mÃ n yÃ¬diÇn ma?", english: "Could you speak a bit more slowly?" },
      { category: "hsk1", label: "HSK 1 Â· Meaning", hanzi: "è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ", pinyin: "ZhÃ¨ shÃ¬ shÃ©nme yÃ¬si?", english: "What does this mean?" },

      { category: "hsk1", label: "HSK 1 Â· Time", hanzi: "ç°åœ¨å‡ ç‚¹ï¼Ÿ", pinyin: "XiÃ nzÃ i jÇ diÇn?", english: "What time is it now?" },
      { category: "hsk1", label: "HSK 1 Â· Date", hanzi: "ä»Šå¤©å‡ å·ï¼Ÿ", pinyin: "JÄ«ntiÄn jÇ hÃ o?", english: "What is todayâ€™s date?" },
      { category: "hsk1", label: "HSK 1 Â· Date", hanzi: "ä»Šå¤©æ˜¯å‡ æœˆå‡ å·ï¼Ÿ", pinyin: "JÄ«ntiÄn shÃ¬ jÇ yuÃ¨ jÇ hÃ o?", english: "What month and day is it today?" },

      { category: "hsk1", label: "HSK 1 Â· Busy", hanzi: "ä½ ä»Šå¤©å¿™å—ï¼Ÿ", pinyin: "NÇ jÄ«ntiÄn mÃ¡ng ma?", english: "Are you busy today?" },
      { category: "hsk1", label: "HSK 1 Â· Busy", hanzi: "æˆ‘å¾ˆå¿™ã€‚", pinyin: "WÇ’ hÄ›n mÃ¡ng.", english: "Iâ€™m very busy." },
      { category: "hsk1", label: "HSK 1 Â· Busy", hanzi: "æˆ‘ä¸å¤ªå¿™ã€‚", pinyin: "WÇ’ bÃº tÃ i mÃ¡ng.", english: "Iâ€™m not very busy." },

      { category: "hsk1", label: "HSK 1 Â· Job", hanzi: "ä½ åšä»€ä¹ˆå·¥ä½œï¼Ÿ", pinyin: "NÇ zuÃ² shÃ©nme gÅngzuÃ²?", english: "What do you do for work?" },
      { category: "hsk1", label: "HSK 1 Â· Job", hanzi: "æˆ‘åœ¨è¯åº—å·¥ä½œã€‚", pinyin: "WÇ’ zÃ i yÃ odiÃ n gÅngzuÃ².", english: "I work at a pharmacy / drugstore." },
      { category: "hsk1", label: "HSK 1 Â· Job", hanzi: "ä½ å–œæ¬¢ä½ çš„å·¥ä½œå—ï¼Ÿ", pinyin: "NÇ xÇhuan nÇ de gÅngzuÃ² ma?", english: "Do you like your job?" },
      { category: "hsk1", label: "HSK 1 Â· Job", hanzi: "æˆ‘å¾ˆå–œæ¬¢ã€‚", pinyin: "WÇ’ hÄ›n xÇhuan.", english: "I like it a lot." },

      { category: "hsk1", label: "HSK 1 Â· Money", hanzi: "è¿™ä¸ªå¤šå°‘é’±ï¼Ÿ", pinyin: "ZhÃ¨ge duÅshao qiÃ¡n?", english: "How much is this?" },
      { category: "hsk1", label: "HSK 1 Â· Money", hanzi: "å¤ªè´µäº†ã€‚", pinyin: "TÃ i guÃ¬ le.", english: "Itâ€™s too expensive." },
      { category: "hsk1", label: "HSK 1 Â· Money", hanzi: "ä¾¿å®œä¸€ç‚¹ï¼Œå¯ä»¥å—ï¼Ÿ", pinyin: "PiÃ¡nyi yÃ¬diÇn, kÄ›yÇ ma?", english: "Can it be a little cheaper?" },
      { category: "hsk1", label: "HSK 1 Â· Money", hanzi: "æˆ‘æƒ³è¦è¿™ä¸ªã€‚", pinyin: "WÇ’ xiÇng yÃ o zhÃ¨ge.", english: "I want this one." },

      { category: "hsk1", label: "HSK 1 Â· Work time", hanzi: "ä½ æ¯å¤©å‡ ç‚¹ä¸Šç­ï¼Ÿ", pinyin: "NÇ mÄ›itiÄn jÇ diÇn shÃ ngbÄn?", english: "What time do you start work every day?" },
      { category: "hsk1", label: "HSK 1 Â· Work time", hanzi: "ä½ å‡ ç‚¹ä¸‹ç­ï¼Ÿ", pinyin: "NÇ jÇ diÇn xiÃ bÄn?", english: "What time do you get off work?" },
      { category: "hsk1", label: "HSK 1 Â· Work time", hanzi: "æˆ‘å…«ç‚¹ä¸Šç­ã€‚", pinyin: "WÇ’ bÄ diÇn shÃ ngbÄn.", english: "I start work at eight." },
      { category: "hsk1", label: "HSK 1 Â· Work time", hanzi: "æˆ‘å…­ç‚¹ä¸‹ç­ã€‚", pinyin: "WÇ’ liÃ¹ diÇn xiÃ bÄn.", english: "I get off work at six." },

      { category: "hsk1", label: "HSK 1 Â· Food", hanzi: "ä½ åƒé¥­äº†å—ï¼Ÿ", pinyin: "NÇ chÄ«fÃ n le ma?", english: "Have you eaten?" },
      { category: "hsk1", label: "HSK 1 Â· Food", hanzi: "æˆ‘è¿˜æ²¡åƒã€‚", pinyin: "WÇ’ hÃ¡i mÃ©i chÄ«.", english: "I havenâ€™t eaten yet." },

      // ---------- HSK 2 ----------
      { category: "hsk2", label: "HSK 2 Â· Transport", hanzi: "ä½ æ€ä¹ˆæ¥è¿™å„¿ï¼Ÿ", pinyin: "NÇ zÄ›nme lÃ¡i zhÃ¨r?", english: "How did you come here?" },
      { category: "hsk2", label: "HSK 2 Â· Transport", hanzi: "æˆ‘åå…¬äº¤è½¦æ¥ã€‚", pinyin: "WÇ’ zuÃ² gÅngjiÄo chÄ“ lÃ¡i.", english: "I came by bus." },
      { category: "hsk2", label: "HSK 2 Â· Transport", hanzi: "æˆ‘å¼€è½¦æ¥ã€‚", pinyin: "WÇ’ kÄichÄ“ lÃ¡i.", english: "I drove here." },

      { category: "hsk2", label: "HSK 2 Â· Weekend", hanzi: "ä½ å‘¨æœ«å–œæ¬¢åšä»€ä¹ˆï¼Ÿ", pinyin: "NÇ zhÅumÃ² xÇhuan zuÃ² shÃ©nme?", english: "What do you like to do on weekends?" },
      { category: "hsk2", label: "HSK 2 Â· Weekend", hanzi: "æˆ‘å–œæ¬¢ç¡è§‰å’Œçœ‹ä¹¦ã€‚", pinyin: "WÇ’ xÇhuan shuÃ¬jiÃ o hÃ© kÃ nshÅ«.", english: "I like to sleep and read." },

      { category: "hsk2", label: "HSK 2 Â· Study", hanzi: "ä½ åœ¨å­¦ä»€ä¹ˆï¼Ÿ", pinyin: "NÇ zÃ i xuÃ© shÃ©nme?", english: "What are you studying?" },
      { category: "hsk2", label: "HSK 2 Â· Study", hanzi: "æˆ‘åœ¨å­¦ä¸­æ–‡ã€‚", pinyin: "WÇ’ zÃ i xuÃ© ZhÅngwÃ©n.", english: "Iâ€™m studying Chinese." },
      { category: "hsk2", label: "HSK 2 Â· Difficulty", hanzi: "å­¦ä¸­æ–‡éš¾ä¸éš¾ï¼Ÿ", pinyin: "XuÃ© ZhÅngwÃ©n nÃ¡n bu nÃ¡n?", english: "Is learning Chinese hard?" },
      { category: "hsk2", label: "HSK 2 Â· Difficulty", hanzi: "æœ‰ä¸€ç‚¹å„¿éš¾ï¼Œä½†æ˜¯å¾ˆæœ‰æ„æ€ã€‚", pinyin: "YÇ’u yÃ¬diÇnr nÃ¡n, dÃ nshÃ¬ hÄ›n yÇ’uyÃ¬si.", english: "Itâ€™s a bit hard, but very interesting." },

      { category: "hsk2", label: "HSK 2 Â· Duration", hanzi: "ä½ æ¯å¤©å­¦ä¹ å¤šé•¿æ—¶é—´ï¼Ÿ", pinyin: "NÇ mÄ›itiÄn xuÃ©xÃ­ duÅ chÃ¡ng shÃ­jiÄn?", english: "How long do you study every day?" },
      { category: "hsk2", label: "HSK 2 Â· Duration", hanzi: "æˆ‘æ¯å¤©å­¦ä¹ ä¸€ä¸ªå°æ—¶ã€‚", pinyin: "WÇ’ mÄ›itiÄn xuÃ©xÃ­ yÃ­ ge xiÇoshÃ­.", english: "I study for one hour every day." },

      { category: "hsk2", label: "HSK 2 Â· Other languages", hanzi: "ä½ ä»¥å‰å­¦è¿‡åˆ«çš„è¯­è¨€å—ï¼Ÿ", pinyin: "NÇ yÇqiÃ¡n xuÃ© guo biÃ© de yÇ”yÃ¡n ma?", english: "Have you studied other languages before?" },
      { category: "hsk2", label: "HSK 2 Â· Other languages", hanzi: "æˆ‘å­¦è¿‡è¥¿ç­ç‰™è¯­ã€‚", pinyin: "WÇ’ xuÃ© guo XÄ«bÄnyÃ¡yÇ”.", english: "Iâ€™ve studied Spanish." },

      { category: "hsk2", label: "HSK 2 Â· Because", hanzi: "å› ä¸ºå·¥ä½œï¼Œæ‰€ä»¥æˆ‘è¦å­¦ä¸­æ–‡ã€‚", pinyin: "YÄ«nwÃ¨i gÅngzuÃ², suÇ’yÇ wÇ’ yÃ o xuÃ© ZhÅngwÃ©n.", english: "Because of work, I want to learn Chinese." },
      { category: "hsk2", label: "HSK 2 Â· Although", hanzi: "è™½ç„¶å¾ˆéš¾ï¼Œä½†æ˜¯æˆ‘ä¸ä¼šæ”¾å¼ƒã€‚", pinyin: "SuÄ«rÃ¡n hÄ›n nÃ¡n, dÃ nshÃ¬ wÇ’ bÃº huÃ¬ fÃ ngqÃ¬.", english: "Although itâ€™s hard, I wonâ€™t give up." },

      { category: "hsk2", label: "HSK 2 Â· Practice", hanzi: "ä½ å¸¸å¸¸è·Ÿè°ç»ƒä¹ è¯´æ±‰è¯­ï¼Ÿ", pinyin: "NÇ chÃ¡ngchÃ¡ng gÄ“n shÃ©i liÃ nxÃ­ shuÅ HÃ nyÇ”?", english: "Who do you often practice speaking Chinese with?" },
      { category: "hsk2", label: "HSK 2 Â· Practice", hanzi: "æˆ‘è·ŸåŒäº‹ç»ƒä¹ ã€‚", pinyin: "WÇ’ gÄ“n tÃ³ngshÃ¬ liÃ nxÃ­.", english: "I practice with my coworkers." },

      { category: "hsk2", label: "HSK 2 Â· Movies", hanzi: "ä½ å–œæ¬¢çœ‹ä¸­æ–‡ç”µå½±å—ï¼Ÿ", pinyin: "NÇ xÇhuan kÃ n ZhÅngwÃ©n diÃ nyÇng ma?", english: "Do you like watching Chinese movies?" },
      { category: "hsk2", label: "HSK 2 Â· Listening", hanzi: "æˆ‘è§‰å¾—å¬åŠ›æœ‰ç‚¹å„¿éš¾ã€‚", pinyin: "WÇ’ juÃ©de tÄ«nglÃ¬ yÇ’udiÇnr nÃ¡n.", english: "I think listening is a bit hard." },

      { category: "hsk2", label: "HSK 2 Â· Repeat", hanzi: "å†è¯´ä¸€éï¼Œå¯ä»¥å—ï¼Ÿ", pinyin: "ZÃ i shuÅ yÃ­ biÃ n, kÄ›yÇ ma?", english: "Could you say it again?" },
      { category: "hsk2", label: "HSK 2 Â· Check sentence", hanzi: "ä½ å¯ä»¥å¸®æˆ‘çœ‹ä¸€ä¸‹è¿™ä¸ªå¥å­å—ï¼Ÿ", pinyin: "NÇ kÄ›yÇ bÄng wÇ’ kÃ n yÃ­xiÃ  zhÃ¨ge jÃ¹zi ma?", english: "Can you help me look at this sentence?" },

      { category: "hsk2", label: "HSK 2 Â· Exam", hanzi: "æˆ‘æƒ³å‚åŠ HSKè€ƒè¯•ã€‚", pinyin: "WÇ’ xiÇng cÄnjiÄ HSK kÇoshÃ¬.", english: "I want to take the HSK exam." },
      { category: "hsk2", label: "HSK 2 Â· Exam", hanzi: "ä½ å‡†å¤‡è€ƒHSKå‡ çº§ï¼Ÿ", pinyin: "NÇ zhÇ”nbÃ¨i kÇo HSK jÇ jÃ­?", english: "Which HSK level are you preparing for?" },
      { category: "hsk2", label: "HSK 2 Â· Exam", hanzi: "æˆ‘å‡†å¤‡è€ƒHSKäºŒçº§ã€‚", pinyin: "WÇ’ zhÇ”nbÃ¨i kÇo HSK Ã¨r jÃ­.", english: "Iâ€™m preparing for HSK Level 2." },

      { category: "hsk2", label: "HSK 2 Â· Travel", hanzi: "æˆ‘æ‰“ç®—æ˜å¹´å»ä¸­å›½æ—…è¡Œã€‚", pinyin: "WÇ’ dÇsuÃ n mÃ­ngniÃ¡n qÃ¹ ZhÅngguÃ³ lÇšxÃ­ng.", english: "I plan to travel to China next year." },
      { category: "hsk2", label: "HSK 2 Â· Travel", hanzi: "ä½ å»è¿‡ä¸­å›½å—ï¼Ÿ", pinyin: "NÇ qÃ¹ guo ZhÅngguÃ³ ma?", english: "Have you been to China?" },
      { category: "hsk2", label: "HSK 2 Â· Travel", hanzi: "æˆ‘è¿˜æ²¡å»è¿‡ã€‚", pinyin: "WÇ’ hÃ¡i mÃ©i qÃ¹ guo.", english: "I havenâ€™t been there yet." },

      { category: "hsk2", label: "HSK 2 Â· Reading", hanzi: "æœ‰æ—¶é—´çš„æ—¶å€™ï¼Œæˆ‘å–œæ¬¢çœ‹ä¸­æ–‡å°è¯´ã€‚", pinyin: "YÇ’u shÃ­jiÄn de shÃ­hou, wÇ’ xÇhuan kÃ n ZhÅngwÃ©n xiÇoshuÅ.", english: "When I have time, I like reading Chinese novels." },
      { category: "hsk2", label: "HSK 2 Â· Ability", hanzi: "å¥¹è¯´æ±‰è¯­è¯´å¾—å¾ˆå¥½ã€‚", pinyin: "TÄ shuÅ HÃ nyÇ” shuÅ de hÄ›n hÇo.", english: "She speaks Chinese very well." },
      { category: "hsk2", label: "HSK 2 Â· Ability", hanzi: "ä½ å†™æ±‰å­—å†™å¾—æ€ä¹ˆæ ·ï¼Ÿ", pinyin: "NÇ xiÄ› HÃ nzÃ¬ xiÄ› de zÄ›nmeyÃ ng?", english: "How is your Chinese character writing?" },
      { category: "hsk2", label: "HSK 2 Â· Ability", hanzi: "æˆ‘å†™å¾—ä¸å¤ªå¥½ã€‚", pinyin: "WÇ’ xiÄ› de bÃº tÃ i hÇo.", english: "I donâ€™t write very well." },
      { category: "hsk2", label: "HSK 2 Â· Progress", hanzi: "ä»–çš„ä¸­æ–‡è¶Šæ¥è¶Šå¥½ã€‚", pinyin: "TÄ de ZhÅngwÃ©n yuÃ¨ lÃ¡i yuÃ¨ hÇo.", english: "His Chinese is getting better and better." },
      { category: "hsk2", label: "HSK 2 Â· Progress", hanzi: "å¤šå¬å¤šè¯´ï¼Œæ±‰è¯­ä¼šæ›´å¥½ã€‚", pinyin: "DuÅ tÄ«ng duÅ shuÅ, HÃ nyÇ” huÃ¬ gÃ¨ng hÇo.", english: "If you listen and speak more, your Chinese will get better." },

      { category: "hsk2", label: "HSK 2 Â· Health", hanzi: "ä½ èº«ä½“æ€ä¹ˆæ ·ï¼Ÿ", pinyin: "NÇ shÄ“ntÇ zÄ›nmeyÃ ng?", english: "How is your health?" },
      { category: "hsk2", label: "HSK 2 Â· Health", hanzi: "æˆ‘æœ‰ç‚¹å„¿ç´¯ã€‚", pinyin: "WÇ’ yÇ’udiÇnr lÃ¨i.", english: "Iâ€™m a bit tired." },
      { category: "hsk2", label: "HSK 2 Â· Workload", hanzi: "æœ€è¿‘å·¥ä½œå¤ªå¤šäº†ã€‚", pinyin: "ZuÃ¬jÃ¬n gÅngzuÃ² tÃ i duÅ le.", english: "Recently I have too much work." },
      { category: "hsk2", label: "HSK 2 Â· Suggestion", hanzi: "ä½ åº”è¯¥å¤šä¼‘æ¯ã€‚", pinyin: "NÇ yÄ«nggÄi duÅ xiÅ«xi.", english: "You should rest more." },

      { category: "hsk2", label: "HSK 2 Â· Weather", hanzi: "å¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ", pinyin: "WÃ imiÃ n tiÄnqÃ¬ zÄ›nmeyÃ ng?", english: "How is the weather outside?" },
      { category: "hsk2", label: "HSK 2 Â· Weather", hanzi: "ä»Šå¤©æœ‰ç‚¹å„¿å†·ã€‚", pinyin: "JÄ«ntiÄn yÇ’udiÇnr lÄ›ng.", english: "Itâ€™s a bit cold today." }
    ];

    let currentMode = "all";
    let currentPool = phrases.slice();
    let remaining = [];
    let seenThisRound = 0;
    let reveal = true;

    const modeButtons = document.querySelectorAll(".mode-btn");
    const hanziEl = document.getElementById("hanzi");
    const pinyinEl = document.getElementById("pinyin");
    const englishEl = document.getElementById("english");
    const categoryTagEl = document.getElementById("categoryTag");
    const indexLabelEl = document.getElementById("indexLabel");
    const newPhraseBtn = document.getElementById("newPhraseBtn");
    const toggleRevealBtn = document.getElementById("toggleRevealBtn");

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function resetPool() {
      if (currentMode === "all") {
        currentPool = phrases.slice();
      } else {
        currentPool = phrases.filter(p => p.category === currentMode);
      }
      remaining = shuffle(currentPool);
      seenThisRound = 0;
      updateIndexLabel();
    }

    function updateIndexLabel() {
      const total = currentPool.length;
      indexLabelEl.textContent = `Seen ${seenThisRound} / ${total}`;
    }

    function updateMode(mode) {
      currentMode = mode;
      modeButtons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.mode === mode);
      });

      let tagText = "HSK Â· Mixed";
      if (mode === "hsk1") tagText = "HSK 1 Â· Core";
      if (mode === "hsk2") tagText = "HSK 2 Â· Core";

      categoryTagEl.textContent = tagText;
      hanziEl.textContent = "ç‚¹å‡»â€œæ–°çŸ­è¯­â€";
      pinyinEl.textContent = "DiÇnâ€‹jÄ« â€œxÄ«n duÇnyÇ”â€";
      englishEl.textContent = "Tap â€œNew phraseâ€ to start.";

      resetPool();

      if (!reveal) {
        pinyinEl.classList.add("hidden");
        englishEl.classList.add("hidden");
      } else {
        pinyinEl.classList.remove("hidden");
        englishEl.classList.remove("hidden");
      }
    }

    function showNewPhrase() {
      if (!currentPool.length) {
        hanziEl.textContent = "è¿™é‡Œè¿˜æ²¡æœ‰çŸ­è¯­ã€‚";
        pinyinEl.textContent = "ZhÃ¨lÇ hÃ¡i mÃ©iyÇ’u duÇnyÇ”.";
        englishEl.textContent = "No phrases in this mode yet.";
        indexLabelEl.textContent = "Seen 0 / 0";
        return;
      }

      if (!remaining.length) {
        remaining = shuffle(currentPool);
        seenThisRound = 0;
      }

      const phrase = remaining.pop();
      seenThisRound++;
      updateIndexLabel();

      hanziEl.textContent = phrase.hanzi;
      pinyinEl.textContent = phrase.pinyin;
      englishEl.textContent = phrase.english;

      const levelLabel = phrase.label || "HSK phrase";
      if (currentMode === "all") {
        categoryTagEl.textContent = levelLabel + " Â· Mixed";
      } else {
        categoryTagEl.textContent = levelLabel;
      }

      if (!reveal) {
        pinyinEl.classList.add("hidden");
        englishEl.classList.add("hidden");
      }
    }

    function toggleReveal() {
      reveal = !reveal;
      if (reveal) {
        pinyinEl.classList.remove("hidden");
        englishEl.classList.remove("hidden");
        toggleRevealBtn.innerHTML = "<span>ğŸ‘ Hide meaning</span>";
      } else {
        pinyinEl.classList.add("hidden");
        englishEl.classList.add("hidden");
        toggleRevealBtn.innerHTML = "<span>ğŸ‘ Show meaning</span>";
      }
    }

    modeButtons.forEach(btn => {
      btn.addEventListener("click", () => updateMode(btn.dataset.mode));
    });
    newPhraseBtn.addEventListener("click", showNewPhrase);
    toggleRevealBtn.addEventListener("click", toggleReveal);

    // Initial setup
    resetPool();
  </script>
</body>
</html>
